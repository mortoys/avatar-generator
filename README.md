
# soul 捏脸的生成系统

最近在网上看了一个社交平台捏头师月入三万的[报道](https://www.sohu.com/a/529801138_116237)，才了解还有这样一个行业

作为程序员打算尝试一下soul头像到底能不能通过算法生成，提升一下捏头师的效率。

先用随机数生成了一次，确实惨不忍睹：

![](imgs/random.JPG)

仔细考虑一下头像的美和和谐怎么来理解：

头像本质是 五官 发型 的相关颜色和配饰的搭配问题，不能说长发还是短发更好看，而应该看互相搭配的好不好。

所以搭配的问题，本质上是对相关的概率进行建模 P(发色|发型) P(眼型|嘴型)，然后就选择属于生成模型的贝叶斯网络来搭建。

目前一共给了约三万个标注，方法是先标注一些数据然后升级一下模型，然后生成更多的数据，再标注一次，再升级模型。

训练的贝叶斯网络：

![](imgs/model_pn05pc10e.png)



算法网络生成的效果：

![](imgs/generator.jpeg)

官方的示例：

![](imgs/offical.jpeg)

可以看到相对官方的示例，算法生成的头像在表情上更加生动，人设更加多样。

缺点是没有配饰，目前还没有给配饰标注数据，因为配饰需要的数据量更大一些，我懒得标注了。


这个算法有一个可能的应用，就是生成无聊猿那种集换式卡牌的NFT


## 如何运行

```
node server.js

streamlit run form.py
```

## 如何把生成的模型，上传到APP上

安装 mitmdump

运行：

```bash
mitmdump -s proxy.py --ssl-insecure -q
```



