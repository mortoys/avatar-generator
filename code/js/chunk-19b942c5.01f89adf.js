(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-19b942c5"],{2687:function(t,e,i){"use strict";i("939c")},"36db":function(t,e,i){"use strict";i("f5f5")},"411d":function(t,e,i){t.exports=i.p+"img/coin.7f589a5a.png"},4127:function(t,e,i){"use strict";var a=i("d233"),r=i("b313"),s={brackets:function(t){return t+"[]"},indices:function(t,e){return t+"["+e+"]"},repeat:function(t){return t}},o=Date.prototype.toISOString,n={delimiter:"&",encode:!0,encoder:a.encode,encodeValuesOnly:!1,serializeDate:function(t){return o.call(t)},skipNulls:!1,strictNullHandling:!1},c=function t(e,i,r,s,o,c,l,p,u,d,f,b){var v=e;if("function"===typeof l)v=l(i,v);else if(v instanceof Date)v=d(v);else if(null===v){if(s)return c&&!b?c(i,n.encoder):i;v=""}if("string"===typeof v||"number"===typeof v||"boolean"===typeof v||a.isBuffer(v)){if(c){var y=b?i:c(i,n.encoder);return[f(y)+"="+f(c(v,n.encoder))]}return[f(i)+"="+f(String(v))]}var g,h=[];if("undefined"===typeof v)return h;if(Array.isArray(l))g=l;else{var m=Object.keys(v);g=p?m.sort(p):m}for(var C=0;C<g.length;++C){var j=g[C];o&&null===v[j]||(h=Array.isArray(v)?h.concat(t(v[j],r(i,j),r,s,o,c,l,p,u,d,f,b)):h.concat(t(v[j],i+(u?"."+j:"["+j+"]"),r,s,o,c,l,p,u,d,f,b)))}return h};t.exports=function(t,e){var i=t,o=e?a.assign({},e):{};if(null!==o.encoder&&void 0!==o.encoder&&"function"!==typeof o.encoder)throw new TypeError("Encoder has to be a function.");var l="undefined"===typeof o.delimiter?n.delimiter:o.delimiter,p="boolean"===typeof o.strictNullHandling?o.strictNullHandling:n.strictNullHandling,u="boolean"===typeof o.skipNulls?o.skipNulls:n.skipNulls,d="boolean"===typeof o.encode?o.encode:n.encode,f="function"===typeof o.encoder?o.encoder:n.encoder,b="function"===typeof o.sort?o.sort:null,v="undefined"!==typeof o.allowDots&&o.allowDots,y="function"===typeof o.serializeDate?o.serializeDate:n.serializeDate,g="boolean"===typeof o.encodeValuesOnly?o.encodeValuesOnly:n.encodeValuesOnly;if("undefined"===typeof o.format)o.format=r["default"];else if(!Object.prototype.hasOwnProperty.call(r.formatters,o.format))throw new TypeError("Unknown format option provided.");var h,m,C=r.formatters[o.format];"function"===typeof o.filter?(m=o.filter,i=m("",i)):Array.isArray(o.filter)&&(m=o.filter,h=m);var j,O=[];if("object"!==typeof i||null===i)return"";j=o.arrayFormat in s?o.arrayFormat:"indices"in o?o.indices?"indices":"repeat":"indices";var _=s[j];h||(h=Object.keys(i)),b&&h.sort(b);for(var x=0;x<h.length;++x){var w=h[x];u&&null===i[w]||(O=O.concat(c(i[w],w,_,p,u,d?f:null,m,b,v,y,C,g)))}var k=O.join(l),A=!0===o.addQueryPrefix?"?":"";return k.length>0?A+k:""}},4328:function(t,e,i){"use strict";var a=i("4127"),r=i("9e6a"),s=i("b313");t.exports={formats:s,parse:r,stringify:a}},"5bf5":function(t,e,i){"use strict";i("6b7a")},"622b":function(t,e,i){t.exports=i.p+"img/coin.7f589a5a.png"},"6b7a":function(t,e,i){},7524:function(t,e,i){t.exports=i.p+"img/five-text.4750e2fe.png"},"81b6":function(t,e,i){t.exports=i.p+"img/one-text.a070a918.png"},"939c":function(t,e,i){},"9e6a":function(t,e,i){"use strict";var a=i("d233"),r=Object.prototype.hasOwnProperty,s={allowDots:!1,allowPrototypes:!1,arrayLimit:20,decoder:a.decode,delimiter:"&",depth:5,parameterLimit:1e3,plainObjects:!1,strictNullHandling:!1},o=function(t,e){for(var i={},a=e.ignoreQueryPrefix?t.replace(/^\?/,""):t,o=e.parameterLimit===1/0?void 0:e.parameterLimit,n=a.split(e.delimiter,o),c=0;c<n.length;++c){var l,p,u=n[c],d=u.indexOf("]="),f=-1===d?u.indexOf("="):d+1;-1===f?(l=e.decoder(u,s.decoder),p=e.strictNullHandling?null:""):(l=e.decoder(u.slice(0,f),s.decoder),p=e.decoder(u.slice(f+1),s.decoder)),r.call(i,l)?i[l]=[].concat(i[l]).concat(p):i[l]=p}return i},n=function(t,e,i){for(var a=e,r=t.length-1;r>=0;--r){var s,o=t[r];if("[]"===o)s=[],s=s.concat(a);else{s=i.plainObjects?Object.create(null):{};var n="["===o.charAt(0)&&"]"===o.charAt(o.length-1)?o.slice(1,-1):o,c=parseInt(n,10);!isNaN(c)&&o!==n&&String(c)===n&&c>=0&&i.parseArrays&&c<=i.arrayLimit?(s=[],s[c]=a):s[n]=a}a=s}return a},c=function(t,e,i){if(t){var a=i.allowDots?t.replace(/\.([^.[]+)/g,"[$1]"):t,s=/(\[[^[\]]*])/,o=/(\[[^[\]]*])/g,c=s.exec(a),l=c?a.slice(0,c.index):a,p=[];if(l){if(!i.plainObjects&&r.call(Object.prototype,l)&&!i.allowPrototypes)return;p.push(l)}var u=0;while(null!==(c=o.exec(a))&&u<i.depth){if(u+=1,!i.plainObjects&&r.call(Object.prototype,c[1].slice(1,-1))&&!i.allowPrototypes)return;p.push(c[1])}return c&&p.push("["+a.slice(c.index)+"]"),n(p,e,i)}};t.exports=function(t,e){var i=e?a.assign({},e):{};if(null!==i.decoder&&void 0!==i.decoder&&"function"!==typeof i.decoder)throw new TypeError("Decoder has to be a function.");if(i.ignoreQueryPrefix=!0===i.ignoreQueryPrefix,i.delimiter="string"===typeof i.delimiter||a.isRegExp(i.delimiter)?i.delimiter:s.delimiter,i.depth="number"===typeof i.depth?i.depth:s.depth,i.arrayLimit="number"===typeof i.arrayLimit?i.arrayLimit:s.arrayLimit,i.parseArrays=!1!==i.parseArrays,i.decoder="function"===typeof i.decoder?i.decoder:s.decoder,i.allowDots="boolean"===typeof i.allowDots?i.allowDots:s.allowDots,i.plainObjects="boolean"===typeof i.plainObjects?i.plainObjects:s.plainObjects,i.allowPrototypes="boolean"===typeof i.allowPrototypes?i.allowPrototypes:s.allowPrototypes,i.parameterLimit="number"===typeof i.parameterLimit?i.parameterLimit:s.parameterLimit,i.strictNullHandling="boolean"===typeof i.strictNullHandling?i.strictNullHandling:s.strictNullHandling,""===t||null===t||"undefined"===typeof t)return i.plainObjects?Object.create(null):{};for(var r="string"===typeof t?o(t,i):t,n=i.plainObjects?Object.create(null):{},l=Object.keys(r),p=0;p<l.length;++p){var u=l[p],d=c(u,r[u],i);n=a.merge(n,d,i)}return a.compact(n)}},a6f6:function(t,e,i){"use strict";i.r(e);var a=function(){var t=this,e=t.$createElement,a=t._self._c||e;return t.data?a("div",{staticClass:"layout"},[a("header",[a("div",{staticClass:"title"},[t._v(t._s(t.data.sceneName))]),a("div",{staticClass:"tips"},[t._v("Soul不鼓励任何投机行为，请广大消费者理性消费")]),a("div",{staticClass:"sub-title"})]),a("main",[a("ul",{staticClass:"blindbox-list"},t._l(t.data.prizeList,(function(e){return a("li",{key:e.id,staticClass:"blindbox-item",class:"card"+e.locationId},[a("img",{staticClass:"avatar",attrs:{src:e.picUrl,alt:""}}),a("div",{staticClass:"name"},[t._v(t._s(e.prizeName))]),a("div",{staticClass:"price"},[a("img",{attrs:{src:i("411d"),alt:""}}),a("div",{staticClass:"num"},[t._v(t._s(e.measurePrice))]),a("span",{staticClass:"gray"},[t._v("直购价")])])])})),0),a("p",{staticClass:"nomore"},[t._v("没有更多了")])]),a("footer",[a("div",{staticClass:"protocol"},[a("span",{staticClass:"protocol-checkbox",on:{click:function(e){t.agree=!t.agree}}},[t.agree?a("img",{staticClass:"checkbox-icon",attrs:{src:i("f33b"),alt:""}}):a("img",{staticClass:"checkbox-icon",attrs:{src:i("bc8e"),alt:""}}),t._v(" 已阅读并同意： ")]),a("span",{staticClass:"protocol-title",on:{click:t.toAgreement}},[t._v("《盲盒幸运购用户参与协议》")])]),a("div",{staticClass:"btn-wrap"},[a("div",{staticClass:"btn single-btn",on:{click:function(e){return t.lottery(0)}}},[a("img",{staticClass:"coin",attrs:{src:i("411d"),alt:""}}),a("span",{staticClass:"num"},[t._v(t._s(t.data.activityPrice))]),a("img",{staticClass:"text",attrs:{src:i("81b6"),alt:""}})]),a("div",{staticClass:"btn five-btn",on:{click:function(e){return t.lottery(1)}}},[a("img",{staticClass:"coin",attrs:{src:i("411d"),alt:""}}),a("span",{staticClass:"num"},[t._v(t._s(t.data.combomboPrice))]),a("img",{staticClass:"text",attrs:{src:i("7524"),alt:""}})])])]),t.lotteryResult?a("SingleDialog",{attrs:{visible:t.visibleSingle,data:t.lotteryResult,price:t.data.activityPrice},on:{"update:visible":function(e){t.visibleSingle=e}}}):t._e(),t.lotteryResult?a("MultipleDialog",{attrs:{visible:t.visibleMultiple,data:t.lotteryResult,price:t.data.combomboPrice},on:{"update:visible":function(e){t.visibleMultiple=e}}}):t._e(),a("s-dialog",{attrs:{visible:t.visibleTips,title:t.tipsTitle,"confirm-txt":"我知道了"},on:{"update:visible":function(e){t.visibleTips=e},confirm:function(e){t.visibleTips=!1}}},[a("div",{staticClass:"tips__container"},[a("p",[t._v(t._s(t.tipsContent))])])])],1):t._e()},r=[],s=i("9ab4"),o=i("60a3"),n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("s-dialog",{attrs:{visible:t.visibleSync,width:750},on:{"update:visible":function(e){t.visibleSync=e},close:t.close}},[a("template",{slot:"empty"},[a("div",{staticClass:"container"},[a("div",{staticClass:"sub-title"},[t._v("抽中"+t._s(t.getAvatarType)+" "+t._s(t.data.prizeLs[0].prizeName))]),a("div",{staticClass:"lottery-item",class:"card"+t.data.prizeLs[0].locationId},[a("img",{staticClass:"avatar",attrs:{src:t.data.prizeLs[0].popUpPicUrl,alt:""}}),a("div",{staticClass:"name"},[t._v(t._s(t.data.prizeLs[0].prizeName))]),a("div",{staticClass:"price"},[a("img",{attrs:{src:i("eaa2"),alt:""}}),a("div",{staticClass:"num"},[t._v(t._s(t.data.prizeLs[0].measurePrice))]),a("span",{staticClass:"gray"},[t._v("直购价")])])]),a("div",{staticClass:"desc"},[t._v("本轮抽到头像回收价值共计"),a("img",{attrs:{src:i("eaa2"),alt:""}}),t._v(t._s(t.recylePrice))]),a("div",{staticClass:"btn-wrap"},[a("div",{staticClass:"btn btn-warehouse",on:{click:t.toWarehouse}}),a("div",{staticClass:"btn btn-close",on:{click:t.close}})]),a("div",{staticClass:"tips"},[t._v("前往盲盒仓库可以回收或领取头像")]),a("div",{staticClass:"share",on:{click:t.share}},[t._v("晒一晒好运 分享欧气")])])])],2)},c=[],l=i("c4a0"),p=i.n(l),u=i("4328"),d=i.n(u);let f=class extends o["g"]{close(){this.visibleSync=!1,p.a.toast({type:"success",text:"头像已放至【盲盒仓库】"})}get recylePrice(){return this.price?Math.round(.8*this.price):""}get getAvatarType(){const t=this.data.prizeLs[0].locationId||0;switch(t){case 1:return"超级限定头像";case 2:return"稀有头像";case 3:return"精选头像";case 4:return"优质头像";default:return"优质头像"}}toWarehouse(){p.a.navigateTo({url:`${location.origin}${location.pathname}#/blindbox/warehouse`})}share(){const t=this.data.prizeLs.map(t=>({prizeName:t.prizeName,popUpPicUrl:t.popUpPicUrl,locationId:t.locationId})),e={info:JSON.stringify(t)},i=d.a.stringify(e);p.a.navigateTo({url:`${location.origin}${location.pathname}#/blindbox/share?${i}`})}};Object(s["a"])([Object(o["e"])("visible")],f.prototype,"visibleSync",void 0),Object(s["a"])([Object(o["d"])()],f.prototype,"data",void 0),Object(s["a"])([Object(o["d"])()],f.prototype,"price",void 0),f=Object(s["a"])([o["a"]],f);var b=f,v=b,y=(i("5bf5"),i("2877")),g=Object(y["a"])(v,n,c,!1,null,"79511e4c",null),h=g.exports,m=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("s-dialog",{attrs:{visible:t.visibleSync,width:750},on:{"update:visible":function(e){t.visibleSync=e},close:t.close}},[a("template",{slot:"empty"},[a("div",{staticClass:"container",attrs:{slot:"empty"},slot:"empty"},[a("div",{staticClass:"sub-title"},[t._v("恭喜连续抽中5个头像")]),a("ul",{staticClass:"lottery-list"},t._l(t.data.prizeLs,(function(e,r){return a("li",{key:r,staticClass:"lottery-item",class:"card"+e.locationId},[a("img",{staticClass:"avatar",attrs:{src:e.popUpPicUrl,alt:""}}),a("div",{staticClass:"name"},[t._v(t._s(e.prizeName))]),a("div",{staticClass:"price"},[a("img",{attrs:{src:i("622b"),alt:""}}),a("div",{staticClass:"num"},[t._v(t._s(e.measurePrice))]),a("span",{staticClass:"gray"},[t._v("直购价")])])])})),0),a("div",{staticClass:"desc"},[t._v("本轮抽到头像回收价值共计"),a("img",{attrs:{src:i("622b"),alt:""}}),t._v(t._s(t.recylePrice))]),a("div",{staticClass:"btn-wrap"},[a("div",{staticClass:"btn btn-warehouse",on:{click:t.toWarehouse}}),a("div",{staticClass:"btn btn-close",on:{click:t.close}})]),a("div",{staticClass:"tips"},[t._v("前往盲盒仓库可以回收或领取头像")]),a("div",{staticClass:"share",on:{click:t.share}},[t._v("晒一晒好运 分享欧气")])])])],2)},C=[];let j=class extends o["g"]{get recylePrice(){return this.price?Math.round(.8*this.price):""}close(){this.visibleSync=!1,p.a.toast({type:"success",text:"头像已放至【盲盒仓库】"})}toWarehouse(){p.a.navigateTo({url:`${location.origin}${location.pathname}#/blindbox/warehouse`})}share(){const t=this.data.prizeLs.map(t=>({prizeName:t.prizeName,popUpPicUrl:t.popUpPicUrl,locationId:t.locationId})),e={info:JSON.stringify(t)},i=d.a.stringify(e);p.a.navigateTo({url:`${location.origin}${location.pathname}#/blindbox/share?${i}`})}};Object(s["a"])([Object(o["e"])("visible")],j.prototype,"visibleSync",void 0),Object(s["a"])([Object(o["d"])()],j.prototype,"data",void 0),Object(s["a"])([Object(o["d"])()],j.prototype,"price",void 0),j=Object(s["a"])([o["a"]],j);var O=j,_=O,x=(i("2687"),Object(y["a"])(_,m,C,!1,null,"069c4116",null)),w=x.exports,k=i("c949"),A=i("d257");let N=class extends o["g"]{constructor(){super(...arguments),this.visibleSingle=!1,this.visibleMultiple=!1,this.visibleTips=!1,this.tipsTitle="盲盒已售罄",this.tipsContent="该盲盒已售罄，下次开启时间请关注官方后续通告",this.agree=!0,this.data=null,this.lotteryResult=null,this.tips=""}get sceneId(){return Number(this.$route.query.sceneId)}toAgreement(){p.a.navigateTo({url:"https://app.soulapp.cn/feeling/#/?disableShare=true&activityIdEcpt=a3F3VGFXUzdKVlE9&pageIdEcpt=ZHZWKytzejFreW89&pageType=1"})}showSoldout(){this.tipsTitle="盲盒已售罄",this.tipsContent="该盲盒已售罄，下次开启时间请关注官方后续通告",this.visibleTips=!0}showNomore(){this.tipsTitle="抽奖次数已达上限",this.tipsContent="你的抽奖次数已达上限，先休息下吧！",this.visibleTips=!0}async lottery(t=0){if(p.a.trackEvent("clk","AvatarShop_blindbox_info_click"),this.tips)p.a.toast({type:"success",text:this.tips});else if(this.agree){A["c"].show();try{const{data:e,desc:i,success:a}=await Object(k["gb"])(this.sceneId,t);if(!a)return void p.a.toast({type:"error",text:i});const r=[];e.prizeLs.forEach(t=>{t.amount>1&&r.push(...Array(t.amount-1).fill(t))}),e.prizeLs.push(...r),e.prizeLs.sort((t,e)=>t.locationId>e.locationId?1:-1),this.lotteryResult=e,0===t?this.visibleSingle=!0:this.visibleMultiple=!0}finally{A["c"].hide()}}else p.a.toast({type:"success",text:"请先勾选协议"})}async getInfo(){const{data:t,code:e}=await Object(k["y"])(this.sceneId);400===e?this.tips="活动尚未开启":500===e&&(this.tips="活动已结束"),this.data=t}initNavigation(){p.a.setNavigationRight({title:"盲盒仓库",color:"#25D4D0"}),p.a.onNavigationRightClick(()=>{p.a.navigateTo({url:`${location.origin}${location.pathname}#/blindbox/warehouse`})})}onShow(){p.a.onShow(()=>{p.a.trackEvent("pv","AvatarShop_blindbox_info_exposure")})}mounted(){this.onShow(),this.initNavigation(),this.getInfo()}};N=Object(s["a"])([Object(o["a"])({components:{SingleDialog:h,MultipleDialog:w}})],N);var P=N,S=P,z=(i("36db"),Object(y["a"])(S,a,r,!1,null,"52ff575e",null));e["default"]=z.exports},b313:function(t,e,i){"use strict";var a=String.prototype.replace,r=/%20/g;t.exports={default:"RFC3986",formatters:{RFC1738:function(t){return a.call(t,r,"+")},RFC3986:function(t){return t}},RFC1738:"RFC1738",RFC3986:"RFC3986"}},bc8e:function(t,e,i){t.exports=i.p+"img/unchecked.fff97fd2.png"},d233:function(t,e,i){"use strict";var a=Object.prototype.hasOwnProperty,r=function(){for(var t=[],e=0;e<256;++e)t.push("%"+((e<16?"0":"")+e.toString(16)).toUpperCase());return t}(),s=function(t){var e;while(t.length){var i=t.pop();if(e=i.obj[i.prop],Array.isArray(e)){for(var a=[],r=0;r<e.length;++r)"undefined"!==typeof e[r]&&a.push(e[r]);i.obj[i.prop]=a}}return e},o=function(t,e){for(var i=e&&e.plainObjects?Object.create(null):{},a=0;a<t.length;++a)"undefined"!==typeof t[a]&&(i[a]=t[a]);return i},n=function t(e,i,r){if(!i)return e;if("object"!==typeof i){if(Array.isArray(e))e.push(i);else{if("object"!==typeof e)return[e,i];(r.plainObjects||r.allowPrototypes||!a.call(Object.prototype,i))&&(e[i]=!0)}return e}if("object"!==typeof e)return[e].concat(i);var s=e;return Array.isArray(e)&&!Array.isArray(i)&&(s=o(e,r)),Array.isArray(e)&&Array.isArray(i)?(i.forEach((function(i,s){a.call(e,s)?e[s]&&"object"===typeof e[s]?e[s]=t(e[s],i,r):e.push(i):e[s]=i})),e):Object.keys(i).reduce((function(e,s){var o=i[s];return a.call(e,s)?e[s]=t(e[s],o,r):e[s]=o,e}),s)},c=function(t,e){return Object.keys(e).reduce((function(t,i){return t[i]=e[i],t}),t)},l=function(t){try{return decodeURIComponent(t.replace(/\+/g," "))}catch(e){return t}},p=function(t){if(0===t.length)return t;for(var e="string"===typeof t?t:String(t),i="",a=0;a<e.length;++a){var s=e.charCodeAt(a);45===s||46===s||95===s||126===s||s>=48&&s<=57||s>=65&&s<=90||s>=97&&s<=122?i+=e.charAt(a):s<128?i+=r[s]:s<2048?i+=r[192|s>>6]+r[128|63&s]:s<55296||s>=57344?i+=r[224|s>>12]+r[128|s>>6&63]+r[128|63&s]:(a+=1,s=65536+((1023&s)<<10|1023&e.charCodeAt(a)),i+=r[240|s>>18]+r[128|s>>12&63]+r[128|s>>6&63]+r[128|63&s])}return i},u=function(t){for(var e=[{obj:{o:t},prop:"o"}],i=[],a=0;a<e.length;++a)for(var r=e[a],o=r.obj[r.prop],n=Object.keys(o),c=0;c<n.length;++c){var l=n[c],p=o[l];"object"===typeof p&&null!==p&&-1===i.indexOf(p)&&(e.push({obj:o,prop:l}),i.push(p))}return s(e)},d=function(t){return"[object RegExp]"===Object.prototype.toString.call(t)},f=function(t){return null!==t&&"undefined"!==typeof t&&!!(t.constructor&&t.constructor.isBuffer&&t.constructor.isBuffer(t))};t.exports={arrayToObject:o,assign:c,compact:u,decode:l,encode:p,isBuffer:f,isRegExp:d,merge:n}},eaa2:function(t,e,i){t.exports=i.p+"img/coin.7f589a5a.png"},f33b:function(t,e,i){t.exports=i.p+"img/checked.60075fe7.png"},f5f5:function(t,e,i){}}]);
//# sourceMappingURL=chunk-19b942c5.01f89adf.js.map