(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-319c0eba"],{"11ee":function(e,t,i){e.exports=i.p+"img/icon_original.bf81af7d.png"},2355:function(e,t,i){e.exports=i.p+"img/icon_fairy.9d1b48e7.png"},"2b01":function(e,t,i){e.exports=i.p+"img/icon_melancholy.2c696ef8.png"},7730:function(e,t,i){"use strict";var s=i("9ab4"),n=i("c4a0"),a=i.n(n),c=i("60a3"),r=i("c949");let o=class extends c["g"]{constructor(){super(...arguments),this.searchValue="",this.visibleBuy=!1,this.currentProduct=null,this.showSearchBtn=!0}openSearchKeyboard(){this.showSearchBtn=!1,a.a.keyboard({maxLen:5,content:this.searchValue,placeholder:"请输入完整的头像名称～",fail:e=>{console.info("keyboard fail:",e),e.msg&&(this.searchValue=String(e.msg))},success:async e=>{if(console.info("keyboard success:",e),!e.data)return;this.searchValue=String(e.data);const t=await Object(r["mb"])(this.searchValue);t?(this.currentProduct=t,this.visibleBuy=!0,this.searchValue=""):(this.openSearchKeyboard(),a.a.toast({type:"error",text:"该头像不存在，请输入正确名称"}))},complete:async e=>{console.info("keyboard complete:",e),this.showSearchBtn=!0,this.searchValue=String(e.data)}})}};o=Object(s["a"])([c["a"]],o),t["a"]=o},"8a2c":function(e,t,i){"use strict";function s(e){const t=[36,37];return t[Number(e)]}i.d(t,"a",(function(){return s})),i.d(t,"b",(function(){return n}));const n=Object.freeze([{iconUrl:"",desc:"集合全平台优质头像，轻松变变变～",title:"全部",index:0,sources:[1001,1002]},{iconUrl:i("c05f"),desc:"",title:"怀旧",index:999,sources:[39,40]},{iconUrl:i("9648"),desc:"人生辣么苦，只有我是草莓味",title:"可爱",index:1,sources:[26,27]},{iconUrl:i("ac2f"),desc:"暗黑系魅力，神秘而强大",title:"暗黑",index:2,sources:[28,29]},{iconUrl:i("2b01"),desc:"如果爱有颜色，那一定是遥远的克莱因蓝",title:"忧郁",index:3,sources:[30,31]},{iconUrl:i("2355"),desc:"仙气飘飘，清夜无尘，月色如银",title:"仙风",index:4,sources:[32,33]},{iconUrl:i("11ee"),desc:"我的头像，天生闪耀独特光芒",title:"创意",index:5,sources:[34,35]},{iconUrl:"",desc:"",title:"挂件",index:666,sources:[26,26]}])},9648:function(e,t,i){e.exports=i.p+"img/icon_cute.51135977.png"},"9a9d":function(e,t,i){},ac2f:function(e,t,i){e.exports=i.p+"img/icon_black.cd372aff.png"},b855:function(e,t,i){"use strict";i.r(t);var s=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"layout"},[i("header",{class:{active:e.isPendant}},[e.iosLowVersion?i("span",{staticClass:"text",on:{click:e.toIosStore}},[e._v("当前版本过低，请更新版本后购买，点击更新")]):i("span",{staticClass:"text"},[e._v("iOS端低于4.19.0版本的用户将无法展示挂件")])]),i("main",[i("div",{staticClass:"nav"},e._l(e.tabListInfo,(function(t){var s=t.title,n=t.index;return i("div",{staticClass:"item",class:{active:e.activeIndex===n},on:{click:function(t){return e.changeIndex(n)}}},[e._v(e._s(s))])})),0),e._l(e.product,(function(t){return i("s-infinite",{directives:[{name:"show",rawName:"v-show",value:e.activeIndex===t.index,expression:"activeIndex === currentList.index"}],key:t.index,attrs:{disabled:t.locked,distance:0},on:{load:e.loadMore}},[i("ul",{staticClass:"container"},e._l(t.data,(function(t,s){return i("li",{key:s,on:{click:function(i){return e.toBuy(t)}}},[i("div",{staticClass:"cover"},[i("img",{attrs:{src:t.commodityUrl+"?x-oss-process=image/resize,w_200"}})]),i("div",{staticClass:"name"},[e._v(e._s(t.commodityName.slice(0,5)))]),i("div",{staticClass:"price"},[i("span",{staticClass:"icon"}),i("span",{staticClass:"num"},[e._v(e._s(t.price))])])])})),0)])}))],2),i("Buy",{attrs:{visible:e.visibleBuy,product:e.currentProduct,userGender:e.userGender},on:{"update:visible":function(t){e.visibleBuy=t}}}),i("BuyPendant",{attrs:{visible:e.visibleBuyPendant,itemIdentity:e.currentProduct&&e.currentProduct.itemIdentity},on:{"update:visible":function(t){e.visibleBuyPendant=t}}})],1)},n=[],a=i("9ab4"),c=i("d36d"),r=i("1a13"),o=i("60a3"),d=i("c949"),u=i("7730"),l=i("c4a0"),h=i.n(l),p=i("8a2c");const v=e=>({offset:0,pageCursor:void 0,data:[],locked:!0,loaded:!1,first:0,index:e});let f=class extends(Object(o["c"])(u["a"])){constructor(){super(...arguments),this.visibleSearch=!1,this.visibleBuy=!1,this.visibleBuyPendant=!1,this.gender=this.$route.query.gender||"1",this.userGender=this.$route.query.userGender||"1",this.activeIndex=Number(this.$route.query.activeIndex||0),this.product=p["b"].map(({index:e})=>v(e)),this.currentProduct=null,this.tabListInfo=p["b"],this.userInfo=null,this.iosLowVersion=h.a.isIOS&&1===h.a.compareVersion(h.a.getAppVersion(),"4.19.0")}get source(){return p["b"].find(e=>e.index===this.activeIndex).sources[Number(this.gender)]}get isPendant(){return h.a.trackEvent("exp","AvatarShop_Main_Tab_pendant"),666===this.activeIndex}get current(){return this.product.find(e=>e.index===this.activeIndex)}toBuy(e){h.a.trackEvent("clk","AvatarShop_GoodsClk",{GoodsId:String(e.itemIdentity)}),this.iosLowVersion&&this.isPendant?h.a.toast({type:"success",text:"请更新版本后购买"}):(this.currentProduct=e,this.isPendant?this.visibleBuyPendant=!0:this.visibleBuy=!0)}toIosStore(){requestAnimationFrame(()=>location.href="https://a.app.qq.com/o/simple.jsp?pkgname=cn.soulapp.android")}async changeIndex(e){this.activeIndex!==e&&(this.activeIndex=e,this.current.data.length||await this.loadMore())}async loadMore(){const e=this.current;e.locked=!1,e.loaded?await new Promise(t=>{this.$nextTick(()=>{e.locked=!0,t(null)})}):await this.getList()}async getList(){const e=20,t=this.current;if(this.isPendant){const i=await Object(d["D"])(this.source,e,t.pageCursor);t.pageCursor=i.pageCursor,"-1"===i.pageCursor?(t.locked=!0,t.loaded=!0):(t.data.push(...i.data),t.locked=!0,t.loaded=!1,0===i.data.length&&(t.loaded=!0))}else{const i=await Object(d["i"])(this.source,t.first,e);t.first=1,0===i.length?(t.locked=!0,t.loaded=!0):(t.data.push(...i),t.locked=!0,t.loaded=!1)}}backEvent(){h.a.onNavigationLeftClick((e,t)=>{h.a.trackEvent("clk","AvatarShop_Back"),t({msg:"",code:0,data:!0}),h.a.navigateBack()})}trackPv(){h.a.trackEvent("pv","AvatarShop_Main_Tab")}initBridge(){h.a.setNavigationRight({imageUrl:"https://fe-cdn.soulapp.cn/activity/nav_icon_search%202-162693.png"}),h.a.onNavigationRightClick(()=>{this.openSearchKeyboard()})}async initUserGender(){this.userInfo=await Object(d["S"])(),this.userGender=String(this.userInfo.gender),"true"===this.$route.query.showOriginGender&&(this.gender=this.userGender)}created(){this.backEvent(),this.initBridge(),this.initUserGender(),this.loadMore()}mounted(){h.a.onShow(this.trackPv)}};f=Object(a["a"])([Object(o["a"])({components:{BuyPendant:r["a"],Buy:c["a"]}})],f);var b=f,g=b,x=(i("de66e"),i("2877")),y=Object(x["a"])(g,s,n,!1,null,"750f3296",null);t["default"]=y.exports},c05f:function(e,t,i){e.exports=i.p+"img/icon_old.292da4ff.png"},de66e:function(e,t,i){"use strict";i("9a9d")}}]);
//# sourceMappingURL=chunk-319c0eba.83da0db7.js.map